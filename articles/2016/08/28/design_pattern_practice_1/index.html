<!DOCTYPE html>
<html lang="zh">

<head>
            <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="">


        <title>è®¾è®¡æ¨¡å¼å®è·µç³»åˆ—ï¼ˆä¸€ï¼‰</title>

            <link href="http://brucezz.itscoder.com//feeds/rss.xml" type="application/rss+xml" rel="alternate" title="Brucezz's Corner Full RSS Feed" />

            <link rel="shortcut icon" href="/favicon.ico">

        <!-- Bootstrap Core CSS -->
        <link href="http://brucezz.github.io/theme/css/bootstrap.min.css" rel="stylesheet">

        <!-- Custom CSS -->
        <link href="http://brucezz.github.io/theme/css/clean-blog.min.css" rel="stylesheet">

        <!-- Code highlight color scheme -->
            <link href="http://brucezz.github.io/theme/css/code_blocks/colorful.css" rel="stylesheet">


            <!-- CSS specified by the user -->
            <link href="http://brucezz.github.io/theme/css/harlem-shake-style.css" rel="stylesheet">

        <!-- Custom Fonts -->
        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css">

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->






	                <meta property="og:locale" content="">
		<meta property="og:site_name" content="Brucezz's Corner">

	<meta property="og:type" content="article">
	<meta property="article:author" content="">
	<meta property="og:url" content="http://brucezz.github.io/articles/2016/08/28/design_pattern_practice_1/">
	<meta property="og:title" content="è®¾è®¡æ¨¡å¼å®è·µç³»åˆ—ï¼ˆä¸€ï¼‰">
	<meta property="og:description" content="">
	<meta property="og:image" content="http://brucezz.github.io//images/cover/android-rain-umbrella-technology-green.jpg">
	<meta property="article:published_time" content="2016-08-28 00:00:00+08:00">
</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="http://brucezz.github.io/">Brucezz's Corner</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                        <li><a href="javascript:go()">High ä¸€ä¸‹</a></li>
                        <li><a href="http://itscoder.com/">itsCoder</a></li>
                        <li><a href="/archives.html">å½’æ¡£</a></li>
                        <li><a href="/categories.html">åˆ†ç±»</a></li>
                        <li><a href="/pages/about.html">å…³äºæˆ‘</a></li>

                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Page Header -->
        <header class="intro-header" style="background-image: url('/images/cover/android-rain-umbrella-technology-green.jpg')">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="post-heading">
                        <h1>è®¾è®¡æ¨¡å¼å®è·µç³»åˆ—ï¼ˆä¸€ï¼‰</h1>
                        <span class="meta">Posted by
                                <a href="http://brucezz.github.io/author/brucezz.html">Brucezz</a>
                             on 2016-08-28
                        </span>
                        
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
    <!-- Post Content -->
    <article>
        <p>æœ€è¿‘åœ¨çœ‹ <a href="https://book.douban.com/subject/1400656/">ã€ŠHead First Design Patternã€‹</a>ï¼ˆé¡ºä¾¿æ¨èä¸€ä¸‹ğŸ˜„ï¼‰ï¼Œæ·±æ„Ÿç»“åˆå®ä¾‹ä¾‹å­æ‰èƒ½ç†è§£å¥½å„ç§æ¨¡å¼ï¼Œä¸‹é¢é€šè¿‡ä¸€ä¸ªå°åœºæ™¯ï¼Œæ¥å®è·µä¸€ä¸‹æœ€è¿‘å­¦ä¹ çš„å››ç§è®¾è®¡æ¨¡å¼ï¼ˆè£…é¥°å™¨æ¨¡å¼ã€å·¥å‚æ–¹æ³•æ¨¡å¼ã€è§‚å¯Ÿè€…æ¨¡å¼å’Œç­–ç•¥æ¨¡å¼ï¼‰ã€‚</p>
<p>é¡¹ç›®åœ°å€ï¼š <a href="https://github.com/brucezz/DesignPatternStudy/tree/master/src/practice/practice01">DesignPatternStudy/src/practice/practice01 at master Â· brucezz/DesignPatternStudy</a></p>
<p>æˆ‘ä»¬å¹³å¸¸æœ€ç¦»ä¸å¼€çš„å°±æ˜¯æ‰‹æœºäº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„æ•…äº‹å°±ä»<strong>ä¹°æ‰‹æœº</strong>å¼€å§‹ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦ä¸ªå®ä½“ç±» <code>Phone</code>ï¼Œä»¥åŠç»§æ‰¿è‡ª <code>Phone</code> çš„ä¸€ç³»åˆ—ä¸åŒå“ç‰Œçš„æ‰‹æœºã€‚</p>
<div class="highlight"><pre><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Phone</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">abstract</span> <span class="n">String</span> <span class="nf">getBrand</span><span class="o">();</span><span class="c1">// å“ç‰Œ</span>

    <span class="c1">//...</span>
<span class="o">}</span>
</pre></div>


<p>ä¸åŒå“ç‰Œçš„æ‰‹æœºå•ç‹¬å®ç°ä¸€ä¸‹ <code>getBrand()</code> æ–¹æ³•å°±å¥½äº†ã€‚</p>
<div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">NexusPhone</span> <span class="kd">extends</span> <span class="n">Phone</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getBrand</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">&quot;Nexus&quot;</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OneplusPhone</span> <span class="kd">extends</span> <span class="n">Phone</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getBrand</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">&quot;Oneplus&quot;</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// ...</span>
</pre></div>


<p>ä¸åŒçš„æ‰‹æœºï¼Œè‡ªç„¶æœ‰è‡ªå·±çš„ featureï¼Œ æ¯”å¦‚æœ‰çš„æ‰‹æœºå±å¹•å¤§ï¼Œæœ‰çš„æ‰‹æœºç»­èˆªæ—¶é—´é•¿ï¼Œè¿˜æœ‰çš„éŸ³è´¨ä¸é”™~</p>
<p>è¿™é‡Œå°±è¦ç”¨åˆ°ç¬¬ä¸€ä¸ªæ¨¡å¼å•¦ â€”â€” <strong>è£…é¥°å™¨æ¨¡å¼</strong>ã€‚å…ˆç»§æ‰¿ <code>Phone</code> å¾—åˆ°ä¸€ä¸ªè£…é¥°å™¨ç±» <code>PhoneDecorator</code>ã€‚</p>
<div class="highlight"><pre><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">PhoneDecorator</span> <span class="kd">extends</span> <span class="n">Phone</span> <span class="o">{</span>
    <span class="kd">protected</span> <span class="n">Phone</span> <span class="n">phone</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">PhoneDecorator</span><span class="o">(</span><span class="n">Phone</span> <span class="n">phone</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">phone</span> <span class="o">=</span> <span class="n">phone</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>è¿™ä¸ªè£…é¥°å™¨ç±»å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ª <code>Phone</code> å¯¹è±¡ï¼Œæ–¹ä¾¿å¯¹å…¶è¿›è¡Œè£…é¥°ï¼ŒåŒæ—¶ç»§æ‰¿äº† <code>Phone</code>ï¼Œä¿è¯è£…é¥°åçš„å¯¹è±¡ç±»å‹ä¸åŸæ¥çš„ç±»å‹ä¿æŒä¸€è‡´ï¼Œä¸ä¼šå½±å“åˆ°ä½¿ç”¨ã€‚</p>
<div class="highlight"><pre><span class="cm">/**</span>
<span class="cm"> * å¤§å±å¹•</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LargeScreen</span> <span class="kd">extends</span> <span class="n">PhoneDecorator</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nf">LargeScreen</span><span class="o">(</span><span class="n">Phone</span> <span class="n">phone</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">phone</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getBrand</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">phone</span><span class="o">.</span><span class="na">getBrand</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot;, Large Screen&quot;</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>å¦‚æœæƒ³è¦å¾—åˆ°ä¸€å°å¤§å±å¹•çš„ Nexusï¼Œå¯ä»¥è¿™æ ·<code>Phone nexus = new LargeScreen(new NexusPhone());</code></p>
<p>å…¶ä»–è£…é¥°å™¨å¯ä»¥å»å‚è€ƒé¡¹ç›®ä»£ç ï¼Œä¸è´´å•¦ã€‚</p>
<p>æœ‰äº†æ‰‹æœºï¼Œå°±è¯¥æœ‰æ‰‹æœºåº—äº†ã€‚æˆ‘ä»¬è¿™é‡Œçš„æ‰‹æœºåº—æ˜¯ä¸“å–åº—å•¦ï¼Œéƒ½åªå–å„è‡ªç±»å‹çš„æ‰‹æœºã€‚é¦–å…ˆæˆ‘ä»¬è¿˜æ˜¯å¾—ä¸€ä¸ªæ¥å£ï¼ˆåœ¨è®¾è®¡æ¨¡å¼é‡Œé¢ï¼Œæ¥å£æ³›æŒ‡çˆ¶ç±»æˆ–è€…æ¥å£è¿™ç§è¶…ç±»å‹ï¼‰æ¥å®šä¹‰ç»Ÿä¸€çš„å–æ‰‹æœºçš„æ–¹æ³•ã€‚å®ç°å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">PhoneStore</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="n">Phone</span> <span class="nf">sale</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">Phone</span> <span class="n">phone</span> <span class="o">=</span> <span class="n">producePhone</span><span class="o">();</span><span class="c1">// ç”Ÿäº§</span>
        <span class="n">phone</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span><span class="c1">// æ‰“åŒ…</span>
        <span class="n">phone</span><span class="o">.</span><span class="na">transport</span><span class="o">();</span><span class="c1">// è¿è¾“</span>
        <span class="k">return</span> <span class="n">phone</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">protected</span> <span class="kd">abstract</span> <span class="n">Phone</span> <span class="nf">producePhone</span><span class="o">();</span>

    <span class="kd">public</span> <span class="kd">abstract</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>


<p>è¿™é‡Œç”¨åˆ°äº†å¦ä¸€ä¸ªæ¨¡å¼ â€”â€” <strong>å·¥å‚æ–¹æ³•æ¨¡å¼</strong>ã€‚å°†å®ä¾‹åŒ– <code>Phone</code> å¯¹è±¡çš„è¿‡ç¨‹å»¶è¿Ÿåˆ°å­ç±»ä¸­è¿›è¡Œï¼Œç”±å­ç±»å³å…·ä½“çš„æ‰‹æœºä¸“å–åº—æ¥å†³å®šæ‰‹æœºçš„ç±»å‹ã€‚è¿™æ ·ä¸€æ¥ï¼Œä¸åŒå“ç‰Œçš„ä¸“å–åº—å°±èƒ½å–å„è‡ªå®¶çš„æ‰‹æœºäº†ã€‚</p>
<div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">NexusStore</span> <span class="kd">extends</span> <span class="n">PhoneStore</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Phone</span> <span class="nf">producePhone</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">LongBatteryLife</span><span class="o">(</span><span class="k">new</span> <span class="n">LargeScreen</span><span class="o">(</span><span class="k">new</span> <span class="n">HiFi</span><span class="o">(</span><span class="k">new</span> <span class="n">NexusPhone</span><span class="o">())));</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">&quot;NexusStore&quot;</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>åˆ°è¿™é‡Œï¼Œ<code>PhoneStore</code> ä¹Ÿå®ç°å¥½äº†ï¼Œæ¶ˆè´¹è€…å¯ä»¥ç›´æ¥é€šè¿‡ <code>Phone nexus = new NexusStore().sale();</code> æ¥ä¹°ä¸€å° nexusã€‚ </p>
<p>æ•´ä¸ªæ•…äº‹çš„å‰§æƒ…å°±æ˜¯è¿™æ ·ï¼š</p>
<div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Customer</span> <span class="n">jaeger</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Customer</span><span class="o">(</span><span class="s">&quot;Jaeger&quot;</span><span class="o">,</span> <span class="s">&quot;Nexus&quot;</span><span class="o">);</span>
        <span class="n">jaeger</span><span class="o">.</span><span class="na">hello</span><span class="o">();</span>

        <span class="n">NexusStore</span> <span class="n">store</span> <span class="o">=</span> <span class="k">new</span> <span class="n">NexusStore</span><span class="o">();</span>
        <span class="n">Phone</span> <span class="n">phone</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="na">sale</span><span class="o">();</span>

        <span class="n">jaeger</span><span class="o">.</span><span class="na">setPhone</span><span class="o">(</span><span class="n">phone</span><span class="o">);</span>
        <span class="n">jaeger</span><span class="o">.</span><span class="na">hello</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>è¾“å‡ºï¼š</p>
<div class="highlight"><pre>[Jaeger] å˜¿, æˆ‘æ˜¯ Jaeger, æˆ‘å–œæ¬¢ Nexus è¿™ä¸ªç‰Œå­, ä¸è¿‡æˆ‘è¿˜æ²¡æœ‰æ‰‹æœºè¯¶ :(
[Nexus, HiFi, Large Screen, Long Battery Life Phone] æ‰“åŒ…ä¸­ ...
[Nexus, HiFi, Large Screen, Long Battery Life Phone] è¿è¾“ä¸­ ...
[Jaeger] æˆ‘æœ‰æ‰‹æœºå•¦! Nexus, HiFi, Large Screen, Long Battery Life
[Jaeger] å˜¿, æˆ‘æ˜¯ Jaeger, æˆ‘å–œæ¬¢ Nexus è¿™ä¸ªç‰Œå­, æˆ‘ç°åœ¨æœ‰ä¸€ä¸ªæ‰‹æœº: Nexus, HiFi, Large Screen, Long Battery Life 
</pre></div>


<p>éªšå¹´ï¼Œä½ ä»¥ä¸ºè¿™æ ·æ•…äº‹å°±å®Œç»“äº†ï¼Ÿå›¾æ ·å›¾æ£®ç ´å•Šï¼
å…¶å® <a href="https://github.com/laobie">Jaeger</a> å»ä¹°æ‰‹æœºçš„æ—¶å€™ï¼Œæ‰‹æœºæ²¡è´§å•¦ ğŸ˜…
ç„¶ååº—å‘˜å‘Šè¯‰ä»–ï¼šä½ åœ¨è¿™é‡Œç™»è®°ä¸€ä¸‹ï¼Œç„¶åä¸‰å¤©ä¹‹åæ‰‹æœºåˆ°è´§äº†ï¼Œæˆ‘ä»¬ä¼šä¸»åŠ¨è”ç³»ä½ çš„ï¼Œåˆ°æ—¶å€™ä½ å†æ¥ä¹°æ‰‹æœºï¼Œè‚¯å®šæœ‰è´§ï¼</p>
<p>è¿™ä¸ªç™»è®°å’Œé€šçŸ¥çš„è¿‡ç¨‹å˜›ï¼Œå°±è¦ç”¨åˆ°ç¬¬ä¸‰ä¸ªæ¨¡å¼ â€”â€” <strong>è§‚å¯Ÿè€…æ¨¡å¼</strong>ã€‚æ‰‹æœºåº—ä¸ºè¢«è§‚å¯Ÿå¯¹è±¡ï¼Œ <a href="https://github.com/laobie">Jaeger</a> æ˜¯è§‚å¯Ÿè€…ã€‚é¦–å…ˆè§‚å¯Ÿè€…è¦å‘è¢«è§‚å¯Ÿè€…è¿›è¡Œæ³¨å†Œï¼Œä¹Ÿå°±æ˜¯ç™»è®°çš„è¿‡ç¨‹ã€‚ç„¶åè¢«è§‚å¯Ÿè€…åœ¨çŠ¶æ€æ”¹å˜æ—¶ï¼Œä¼šé€šçŸ¥æ‰€æœ‰æ³¨å†Œçš„è§‚å¯Ÿè€…ã€‚</p>
<div class="highlight"><pre><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">PhoneStore</span> <span class="o">{</span>

    <span class="cm">/**</span>
<span class="cm">     * ç­‰å¾…è´­ä¹°çš„é¡¾å®¢çš„åˆ—è¡¨</span>
<span class="cm">     */</span>
    <span class="kd">protected</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Waiting</span><span class="o">&gt;</span> <span class="n">waitList</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>

    <span class="kd">public</span> <span class="n">Phone</span> <span class="nf">sale</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">isPhoneValid</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">Phone</span> <span class="n">phone</span> <span class="o">=</span> <span class="n">producePhone</span><span class="o">();</span>
            <span class="n">phone</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
            <span class="n">phone</span><span class="o">.</span><span class="na">transport</span><span class="o">();</span>
            <span class="k">return</span> <span class="n">phone</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;[&quot;</span> <span class="o">+</span> <span class="n">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot;] ç°åœ¨æ‰‹æœºå–å®Œå•¦, ä½ å…ˆç™»è®°ä¸€ä¸‹, ç­‰ä¸‰å¤©ä¹‹åæ‰‹æœºåˆ°è´§äº†æˆ‘ä»¬å†é€šçŸ¥ä½ ~&quot;</span><span class="o">);</span>
            <span class="n">days</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
            <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">register</span><span class="o">(</span><span class="n">Waiting</span> <span class="n">waiting</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">waitList</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">waiting</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">waitList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">waiting</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">unRegister</span><span class="o">(</span><span class="n">Customer</span> <span class="n">customer</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">waitList</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">customer</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">notifyAllCustomers</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">Waiting</span> <span class="n">waiting</span> <span class="o">:</span> <span class="n">waitList</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">waiting</span><span class="o">.</span><span class="na">onPhoneValid</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">int</span> <span class="n">days</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span>

    <span class="cm">/**</span>
<span class="cm">     * ç­‰å¾…ä¸‰å¤©</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">oneDayPassed</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">days</span><span class="o">++;</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">days</span> <span class="o">+</span> <span class="s">&quot; å¤©è¿‡å»äº† ...&quot;</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">days</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">notifyAllCustomers</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">boolean</span> <span class="nf">isPhoneValid</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">days</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">protected</span> <span class="kd">abstract</span> <span class="n">Phone</span> <span class="nf">producePhone</span><span class="o">();</span>

    <span class="kd">public</span> <span class="kd">abstract</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">();</span>

    <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Waiting</span> <span class="o">{</span>
        <span class="kt">void</span> <span class="nf">onPhoneValid</span><span class="o">(</span><span class="n">PhoneStore</span> <span class="n">store</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Customer</span> <span class="kd">implements</span> <span class="n">PhoneStore</span><span class="o">.</span><span class="na">Waiting</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="n">favorite</span><span class="o">;</span>
    <span class="kd">public</span> <span class="n">Phone</span> <span class="n">phone</span><span class="o">;</span>

    <span class="cm">/**</span>
<span class="cm">     * @param name     åå­—</span>
<span class="cm">     * @param favorite å–œæ¬¢çš„ç‰Œå­</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="nf">Customer</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">String</span> <span class="n">favorite</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">favorite</span> <span class="o">=</span> <span class="n">favorite</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPhone</span><span class="o">(</span><span class="n">Phone</span> <span class="n">phone</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;[&quot;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s">&quot;] &quot;</span> <span class="o">+</span>
                <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">phone</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="s">&quot;æˆ‘æœ‰&quot;</span> <span class="o">:</span> <span class="s">&quot;æˆ‘æ¢&quot;</span><span class="o">)</span> <span class="o">+</span>
                <span class="s">&quot;æ‰‹æœºå•¦! &quot;</span> <span class="o">+</span> <span class="n">phone</span><span class="o">.</span><span class="na">getBrand</span><span class="o">());</span>
        <span class="k">this</span><span class="o">.</span><span class="na">phone</span> <span class="o">=</span> <span class="n">phone</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * å•†åº—é€šçŸ¥è¯´,æœ‰è´§å•¦!</span>
<span class="cm">     */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onPhoneValid</span><span class="o">(</span><span class="n">PhoneStore</span> <span class="n">store</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">setPhone</span><span class="o">(</span><span class="n">store</span><span class="o">.</span><span class="na">sale</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="n">Object</span> <span class="n">obj</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">obj</span> <span class="k">instanceof</span> <span class="n">Customer</span> <span class="o">&amp;&amp;</span> <span class="n">name</span><span class="o">.</span><span class="na">equals</span><span class="o">(((</span><span class="n">Customer</span><span class="o">)</span> <span class="n">obj</span><span class="o">).</span><span class="na">name</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&quot;[%s] å˜¿, æˆ‘æ˜¯ %s, æˆ‘å–œæ¬¢ %s è¿™ä¸ªç‰Œå­, &quot;</span> <span class="o">+</span> <span class="o">(</span><span class="n">phone</span> <span class="o">==</span> <span class="kc">null</span>
                <span class="o">?</span> <span class="s">&quot;ä¸è¿‡æˆ‘è¿˜æ²¡æœ‰æ‰‹æœºè¯¶ :(&quot;</span>
                <span class="o">:</span> <span class="s">&quot;æˆ‘ç°åœ¨æœ‰ä¸€ä¸ªæ‰‹æœº: &quot;</span> <span class="o">+</span> <span class="n">phone</span><span class="o">.</span><span class="na">getBrand</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot; ^_^&quot;</span><span class="o">),</span> <span class="n">name</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span> <span class="n">favorite</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">hello</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">toString</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>è¿™é‡Œç”¨ <code>oneDayPassed()</code> æ–¹æ³•æ¥æ¨¡æ‹Ÿæ—¶é—´çš„æµé€ï¼Œè®¡æ•°ç´¯è®¡åˆ° 3 æ—¶ï¼Œä¸ºæ‰‹æœºæœ‰è´§çš„çŠ¶æ€ã€‚
è®©æ¶ˆè´¹è€…å®ç° <code>PhoneStore.Waiting</code> è¿™ä¸ªæ¥å£æ¥å®šä¹‰æ”¶åˆ°é€šçŸ¥æ—¶çš„æ“ä½œã€‚å•†åº—å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªåˆ—è¡¨ï¼ŒæŠŠæ‰€æœ‰ç­‰å¾…çš„æ¶ˆè´¹è€…éƒ½åŠ è¿›å»äº†ï¼Œç­‰åˆ°æ‰‹æœºæœ‰è´§äº†ï¼ŒæŒ¨ä¸ªé€šçŸ¥æ¶ˆè´¹è€…ï¼Œè®©å…¶å›æ¥ä¹°æ‰‹æœºã€‚</p>
<p>é€šè¿‡å®ç°è§‚å¯Ÿè€…æ¨¡å¼ï¼Œè§£å†³äº†æ‰‹æœºå–å®Œçš„å°´å°¬äº†ã€‚ã€‚</p>
<div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Customer</span> <span class="n">jaeger</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Customer</span><span class="o">(</span><span class="s">&quot;Jaeger&quot;</span><span class="o">,</span> <span class="s">&quot;Nexus&quot;</span><span class="o">);</span>
        <span class="n">jaeger</span><span class="o">.</span><span class="na">hello</span><span class="o">();</span>

        <span class="n">PhoneStore</span> <span class="n">store</span> <span class="o">=</span> <span class="k">new</span> <span class="n">NexusStore</span><span class="o">();</span>
        <span class="n">Phone</span> <span class="n">phone</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="na">sale</span><span class="o">();</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">phone</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// ç­‰ä¸‰å¤©</span>
            <span class="n">store</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="n">jaeger</span><span class="o">);</span>
            <span class="n">store</span><span class="o">.</span><span class="na">oneDayPassed</span><span class="o">();</span>
            <span class="n">store</span><span class="o">.</span><span class="na">oneDayPassed</span><span class="o">();</span>
            <span class="n">store</span><span class="o">.</span><span class="na">oneDayPassed</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="n">jaeger</span><span class="o">.</span><span class="na">hello</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<div class="highlight"><pre>[Jaeger] å˜¿, æˆ‘æ˜¯ Jaeger, æˆ‘å–œæ¬¢ Nexus è¿™ä¸ªç‰Œå­, ä¸è¿‡æˆ‘è¿˜æ²¡æœ‰æ‰‹æœºè¯¶ :(
[NexusStore] ç°åœ¨æ‰‹æœºå–å®Œå•¦, ä½ å…ˆç™»è®°ä¸€ä¸‹, ç­‰ä¸‰å¤©ä¹‹åæ‰‹æœºåˆ°è´§äº†æˆ‘ä»¬å†é€šçŸ¥ä½ ~
1 å¤©è¿‡å»äº† ...
2 å¤©è¿‡å»äº† ...
3 å¤©è¿‡å»äº† ...
[Nexus, HiFi, Large Screen, Long Battery Life Phone] æ‰“åŒ…ä¸­ ...
[Nexus, HiFi, Large Screen, Long Battery Life Phone] è¿è¾“ä¸­ ...
[Jaeger] æˆ‘æœ‰æ‰‹æœºå•¦! Nexus, HiFi, Large Screen, Long Battery Life
[Jaeger] å˜¿, æˆ‘æ˜¯ Jaeger, æˆ‘å–œæ¬¢ Nexus è¿™ä¸ªç‰Œå­, æˆ‘ç°åœ¨æœ‰ä¸€ä¸ªæ‰‹æœº: Nexus, HiFi, Large Screen, Long Battery Life ^_^
</pre></div>


<p>æœ€åï¼Œ <a href="https://github.com/laobie">Jaeger</a> è§‰å¾—è¿™ä¸ª Nexus æ‰‹æœºç”¨ç€ä¸çˆ½ï¼Œè¦ä¹°æœ€æ–°çš„ 1+3 ğŸ˜’ã€‚è¿™ä¸ªä¸éš¾ï¼Œç›´æ¥å»ä¸“å–åº—ä¹°ä¸€ä¸ªå°±å¥½å•¦ã€‚</p>
<div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// ... çœç•¥</span>

        <span class="c1">// æ¢ä¸ªæ‰‹æœº</span>
        <span class="n">store</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OneplusStore</span><span class="o">();</span>
        <span class="n">phone</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="na">sale</span><span class="o">();</span>
        <span class="n">jaeger</span><span class="o">.</span><span class="na">setPhone</span><span class="o">(</span><span class="n">phone</span><span class="o">);</span>
        <span class="n">jaeger</span><span class="o">.</span><span class="na">hello</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>å…¶å®è¿™é‡ŒåŒ…å«äº†æœ€åä¸€ç§æ¨¡å¼ â€”â€” <strong>ç­–ç•¥æ¨¡å¼</strong>ã€‚<code>Custom</code> å¯¹è±¡ä¸­æŒæœ‰ä¸€ä¸ª <code>Phone</code> æ‰‹æœºå¯¹è±¡ï¼Œè¿™æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»å‹ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªå…·ä½“çš„ç±»ã€‚è¿™æ ·çš„å¥½å¤„å°±æ˜¯å¯ä»¥æ–¹ä¾¿åœ°ç”¨ <code>Phone</code> çš„ä»»æ„å­ç±»å»æ›¿æ¢ <code>Custom</code> ä¸­çš„æ‰‹æœºï¼Œè€Œä¸ä¼šå½±å“åˆ°å†…éƒ¨å…¶ä»–åœ°æ–¹çš„ä½¿ç”¨ã€‚</p>
<p>å¼äº†ï¼Œæ•…äº‹å°±æ‰¯åˆ°è¿™é‡Œäº†ï¼Œé€šè¿‡  <a href="https://github.com/laobie">Jaeger</a> ä¹°æ‰‹æœºçš„ç»å†ï¼Œå®è·µäº†ä¸€ä¸‹è¿™å››ä¸ªè®¾è®¡æ¨¡å¼ï¼Œæ€»ç»“ä¸€ä¸‹ï¼š</p>
<ul>
<li>è£…é¥°å™¨æ¨¡å¼ï¼šåŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡å¢åŠ ä¸€äº›é¢å¤–çš„èŒè´£ï¼Œæ¯”ç”Ÿæˆå­ç±»æ›´ä¸ºçµæ´»ã€‚</li>
<li>å·¥å‚æ–¹æ³•æ¨¡å¼ï¼šå®šä¹‰ä¸€ä¸ªç”¨äºåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å­ç±»å†³å®šå°†å“ªä¸€ä¸ªç±»å®ä¾‹åŒ–</li>
<li>è§‚å¯Ÿè€…æ¨¡å¼ï¼šå®šä¹‰å¯¹è±¡ä¹‹é—´çš„ä¸€ç§ä¸€å¯¹å¤šä¾èµ–å…³ç³»ï¼Œä½¿å¾—æ¯å½“ä¸€ä¸ªå¯¹è±¡çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå…¶ç›¸å…³ä¾èµ–å¯¹è±¡çš†å¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚</li>
<li>ç­–ç•¥æ¨¡å¼ï¼šå®šä¹‰ä¸€ç³»åˆ—ç­–ç•¥ï¼Œå°†æ¯ä¸€ä¸ªç­–ç•¥å°è£…èµ·æ¥ï¼Œå¹¶è®©å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ï¼Œè®©ä»–ä»¬çš„å˜åŒ–ç‹¬ç«‹è¯­è°ƒç”¨è€…ã€‚</li>
</ul>
<p>å…¶ä»–è®¾è®¡æ¨¡å¼å¾…ç»­â€¦â€¦</p>
<p>æˆ‘çš„è®¾è®¡æ¨¡å¼ç»ƒä¹ ä»£ç ï¼š<a href="https://github.com/brucezz/DesignPatternStudy">brucezz/DesignPatternStudy: Design Pattern in Java</a></p>
<p>å¯¹äºè®¾è®¡æ¨¡å¼æˆ‘ä¹Ÿåªæ˜¯åˆå­¦ï¼Œæœ‰ä¸€äº›è‡ªå·±çš„ç†è§£ï¼Œæ¬¢è¿æ¥è®¨è®ºæŒ‡ç‚¹ ğŸ˜„</p>
<blockquote>
<p>æœ€åçš„æœ€åï¼Œæ„Ÿè°¢å¥½æœºæ²¹  <a href="https://github.com/laobie">Jaeger</a> å€¾æƒ…å‡ºæ¼”ğŸ˜†ï¼</p>
</blockquote>
    </article>


<div class="sharing">
</div>
    <hr>


<div class="ds-thread" data-thread-key="design_pattern_practice_1" data-title="è®¾è®¡æ¨¡å¼å®è·µç³»åˆ—ï¼ˆä¸€ï¼‰" data-url="http://brucezz.github.io/articles/2016/08/28/design_pattern_practice_1/"></div>
<script>
    var duoshuoQuery = {short_name:"brucezz"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;

        ds.src = 'http://brucezz.github.io/theme/js/embed.js';

        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0]
         || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();

</script>



            </div>
        </div>
    </div>

    <hr>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <ul class="list-inline text-center">
                            <li>
                                <a href="http://github.com/brucezz" target="_blank">
                                    <span class="fa-stack fa-lg">
                                        <i class="fa fa-circle fa-stack-2x"></i>
                                            <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                    </span>
                                </a>
                            </li>
                            <li>
                                <a href="http://weibo.com/u/1947300213" target="_blank">
                                    <span class="fa-stack fa-lg">
                                        <i class="fa fa-circle fa-stack-2x"></i>
                                            <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
                                    </span>
                                </a>
                            </li>
                            <li>
                                <a href="https://www.zhihu.com/people/zeroZh" target="_blank">
                                    <span class="fa-stack fa-lg">
                                        <i class="fa fa-circle fa-stack-2x"></i>
                                            <i class="fa fa-stack-1x fa-inverse">çŸ¥</i>
                                    </span>
                                </a>
                            </li>
                            <li>
                                <a href="http://brucezz.itscoder.com/feeds/rss.xml" target="_blank">
                                    <span class="fa-stack fa-lg">
                                        <i class="fa fa-circle fa-stack-2x"></i>
                                            <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                                    </span>
                                </a>
                            </li>
                    </ul>
<p class="copyright text-muted">
    Blog powered by <a href="http://getpelican.com">Pelican</a>,
    which takes great advantage of <a href="http://python.org">Python</a>.
</p><div align="center"><script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1256702937'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s4.cnzz.com/z_stat.php%3Fid%3D1256702937%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</div>                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="http://brucezz.github.io/theme/js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="http://brucezz.github.io/theme/js/bootstrap.min.js"></script>

        <!-- Custom Theme JavaScript -->
        <script src="http://brucezz.github.io/theme/js/clean-blog.min.js"></script>

        <!-- Custom Theme JavaScript -->
        <script src="http://brucezz.github.io/theme/js/high.js"></script>


</body>

</html>